<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Video Ball ‚Äî Story Frames</title>
  <meta name="description" content="Video Ball ‚Äî Story Frames. We turn your photo into a short video and embed it in the product. PayPal or COD in Bulgaria." />

  <link rel="stylesheet" href="styles.css">
  <script defer src="i18n.js"></script>
  <!-- PayPal SDK - supports both PayPal and card payments -->
  <script src="https://www.paypal.com/sdk/js?client-id=AZDxjDScFpQtjWTOUtWKbyN_bDt4OgqaF4eYXlewfBP4-8aqX3PiV8e1GWU6liB2CUed2TK-uhjVCt_b&currency=EUR&intent=capture"></script>

  <style>
    /* page-specific small layout */
    .wrap{display:grid; grid-template-columns: 1.1fr .9fr; gap:14px; align-items:start}
    .box{border:1px solid var(--line); border-radius:24px; background: rgba(255,255,255,.04); box-shadow: var(--shadow); padding:18px}
    .muted{color:var(--muted)}
    .grid3{display:grid; grid-template-columns: repeat(3, 1fr); gap:10px; margin-top:12px}
    .thumb{border:1px solid var(--line); border-radius:16px; overflow:hidden; background: rgba(0,0,0,.18); cursor:pointer}
    .thumb img{width:100%; height:170px; object-fit:cover; display:block}
    @media (max-width: 920px){.wrap{grid-template-columns:1fr}.grid3{grid-template-columns:1fr}}
  </style>
</head>

<body>
  <div class="container">
    <header class="top">
      <a class="brand" href="index.html">
        <div class="logo"><img src="logo.png" alt="Story Frames"></div>
        <div>
          <strong>Story Frames</strong>
          <small data-i18n="tagline">Crafting stories from photos</small>
        </div>
      </a>

      <nav class="topnav">
        <a href="index.html" data-i18n="nav_home">Home</a>
        <a href="index.html#products" data-i18n="nav_products">Products</a>
        <a class="pill" href="https://facebook.com/Storyframesvarna/" target="_blank" rel="noopener noreferrer">Facebook</a>

        <a class="cart-icon" href="index.html#cart" id="cartIcon">
          üõí <span data-i18n="cart">Cart</span>
          <span class="cart-badge" id="cartBadge" style="display:none;">0</span>
        </a>

        <div class="lang" aria-label="Language">
          <button class="langbtn" data-lang="en">EN</button>
          <button class="langbtn" data-lang="bg">BG</button>
        </div>
      </nav>
    </header>

    <div class="wrap">
      <div class="box">
        <h1 data-i18n="p1_title">Video Ball</h1>
        <p class="muted" data-i18n="p1_desc">A modern spherical display with your animated memory inside.</p>

        <div class="grid3">
          <div class="thumb" onclick="openLightbox('ball-1.jpg')"><img src="ball-1.jpg" alt="Ball 1"></div>
          <div class="thumb" onclick="openLightbox('ball-2.jpg')"><img src="ball-2.jpg" alt="Ball 2"></div>
          <div class="thumb" onclick="openLightbox('ball-3.jpg')"><img src="ball-3.jpg" alt="Ball 3"></div>
        </div>

        <div class="actions" style="margin-top:14px">
          <a class="btn" href="index.html" data-i18n="back_home">Back to home</a>
        </div>
      </div>

      <div class="box">
        <div class="price">‚Ç¨39</div>
        <div class="tiny" data-i18n="pay_physical">PayPal (card) ‚Ä¢ Bulgaria COD</div>

        <!-- PayPal Smart Payment Buttons -->
        <div id="paypal-button-container" style="margin-top:12px"></div>
        
        <div class="actions" style="margin-top:12px">
          <button class="btn gold" data-i18n="buy_cod" onclick="codOrder('Video Ball', 39)">Bulgaria COD</button>
        </div>

        <div style="margin-top:14px" class="muted" data-i18n="what_you_get">
          <b>What you get:</b><br>
          ‚Ä¢ Your photo becomes a short ‚Äúmagic‚Äù video story<br>
          ‚Ä¢ Personal, emotional, premium gift<br>
          ‚Ä¢ Perfect for birthdays, anniversaries, surprises
        </div>

        <div class="actions" style="margin-top:14px">
          <a class="btn" href="mailto:Sviievmla@gmail.com?subject=Story%20Frames%20Order%20-%20Video%20Ball">Email</a>
          <a class="btn" href="https://facebook.com/Storyframesvarna/" target="_blank" rel="noopener noreferrer">Facebook</a>
        </div>
      </div>
    </div>
  </div>

  <div class="lightbox" id="lightbox" onclick="closeLightbox()">
    <img id="lightboxImg" alt="Expanded image" />
  </div>

  <script>
    const PAYPAL_EMAIL = "Sviievmla@gmail.com";
    const CONTACT_EMAIL = "Sviievmla@gmail.com";

    // Update cart badge on page load
    function updateCartBadge() {
      const cart = JSON.parse(localStorage.getItem('storyframesCart') || '[]');
      const badge = document.getElementById('cartBadge');
      if (cart.length > 0) {
        badge.style.display = 'flex';
        badge.textContent = cart.length;
      } else {
        badge.style.display = 'none';
      }
    }
    updateCartBadge();

    // Render PayPal Smart Payment Buttons
    const PRODUCT_NAME = 'Video Ball';
    const PRODUCT_PRICE = 39;
    
    paypal.Buttons({
      style: {
        layout: 'vertical',
        color: 'gold',
        shape: 'rect',
        label: 'paypal'
      },
      
      createOrder: function(data, actions) {
        return actions.order.create({
          purchase_units: [{
            description: PRODUCT_NAME,
            amount: {
              currency_code: 'EUR',
              value: PRODUCT_PRICE.toFixed(2)
            }
          }]
        });
      },
      
      onApprove: function(data, actions) {
        return actions.order.capture().then(function(details) {
          alert('Payment successful! Order ID: ' + details.id + '\n\nThank you, ' + details.payer.name.given_name + '!\n\nWe will send you an email confirmation shortly.');
          
          // Send order confirmation
          const subject = 'Story Frames Order Confirmation - ' + details.id;
          const body = [
            'Order Confirmation',
            '',
            'Transaction ID: ' + details.id,
            'Customer: ' + details.payer.name.given_name + ' ' + details.payer.name.surname,
            'Email: ' + details.payer.email_address,
            '',
            'Product: ' + PRODUCT_NAME,
            'Price: ‚Ç¨' + PRODUCT_PRICE.toFixed(2),
            '',
            'Please send your photos to complete the order.'
          ].join('\n');
          
          window.open(`mailto:Sviievmla@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`, '_blank');
        });
      },
      
      onError: function(err) {
        console.error('PayPal error:', err);
        alert('An error occurred during payment. Please try again.');
      },
      
      onCancel: function(data) {
        alert('Payment cancelled.');
      }
    }).render('#paypal-button-container');

    function codOrder(item, amount){
      const subject = `Story Frames COD Order ‚Äî ${item}`;
      const body = [
        "New COD Order (Bulgaria)",
        "",
        `Product: ${item}`,
        `Price: ‚Ç¨${amount.toFixed(2)}`,
        "",
        "Name:",
        "Phone:",
        "City / Address:",
        "",
        "Photo link / notes (optional):",
        "",
        "Please reply to confirm delivery details."
      ].join("\n");
      window.location.href = `mailto:${encodeURIComponent(CONTACT_EMAIL)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    }

    function openLightbox(src){
      document.getElementById("lightboxImg").src = src;
      document.getElementById("lightbox").style.display = "flex";
      document.body.style.overflow = "hidden";
    }
    function closeLightbox(){
      document.getElementById("lightbox").style.display = "none";
      document.body.style.overflow = "";
    }
  </script>
</body>
</html>
